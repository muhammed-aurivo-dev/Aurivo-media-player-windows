<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline'; img-src 'self' data: https:; media-src 'self' file:; frame-src https://music.youtube.com https://www.youtube.com https://open.spotify.com https://www.deezer.com https://soundcloud.com https://www.mixcloud.com;">
    <title>Aurivo Media Player</title>
    <link rel="stylesheet" href="styles/main.css">
</head>
<body>
    <div class="app-container">
        <!-- Sol Sidebar (İkonlar) -->
        <nav class="sidebar" id="sidebar">
            <div class="sidebar-top">
                <button class="sidebar-btn active" data-page="files" data-panel="library" title="Dosyalar">
                    <svg viewBox="0 0 24 24" fill="currentColor"><path d="M10 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2h-8l-2-2z"/></svg>
                </button>
                <button class="sidebar-btn" data-page="video" data-panel="library" title="Videolar">
                    <svg viewBox="0 0 24 24" fill="currentColor"><path d="M18 4l2 4h-3l-2-4h-2l2 4h-3l-2-4H8l2 4H7L5 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V4h-4z"/></svg>
                </button>
                <button class="sidebar-btn" data-page="music" data-panel="library" title="Müzik">
                    <svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 3v10.55c-.59-.34-1.27-.55-2-.55-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4V7h4V3h-6z"/></svg>
                </button>
                <button class="sidebar-btn" data-page="web" data-panel="web" title="Web">
                    <svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"/></svg>
                </button>
            </div>
            <div class="sidebar-bottom">
                <button class="sidebar-btn" id="settingsBtn" title="Ayarlar">
                    <svg viewBox="0 0 24 24" fill="currentColor"><path d="M19.14 12.94c.04-.31.06-.63.06-.94 0-.31-.02-.63-.06-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.04.31-.06.63-.06.94s.02.63.06.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"/></svg>
                </button>
                <button class="sidebar-btn" id="infoBtn" title="Hakkında">
                    <svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"/></svg>
                </button>
            </div>
        </nav>

        <!-- Sol Panel Stack -->
        <div class="left-panel" id="leftPanel">
            <!-- Kütüphane Paneli -->
            <div class="panel-content" id="libraryPanel">
                <div class="panel-header">
                    <span class="panel-title">KÜTÜPHANE</span>
                </div>
                <div class="file-tree" id="fileTree">
                    <div class="tree-loading">Yükleniyor...</div>
                </div>
            </div>

            <!-- Web Platformları Paneli -->
            <div class="panel-content hidden" id="webPanel">
                <div class="panel-header">
                    <span class="panel-title">İNTERNET</span>
                </div>
                <button class="security-btn" id="securityBtn">
                    <svg viewBox="0 0 24 24" fill="currentColor" width="32" height="32"><path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm0 10.99h7c-.53 4.12-3.28 7.79-7 8.94V12H5V6.3l7-3.11v8.8z"/></svg>
                </button>
                <div class="web-platforms">
                    <button class="platform-btn" data-url="https://music.youtube.com/" data-platform="youtube">
                        <img src="icons/youtube_music.svg" alt="YT Music">
                        <span>YouTube Music</span>
                    </button>
                    <button class="platform-btn" data-url="https://www.youtube.com/" data-platform="youtube">
                        <img src="icons/youtube_modern.svg" alt="YouTube">
                        <span>YouTube</span>
                    </button>
                    <button class="platform-btn" data-url="https://open.spotify.com/" data-platform="spotify">
                        <img src="icons/spotify.svg" alt="Spotify">
                        <span>Spotify</span>
                    </button>
                    <button class="platform-btn" data-url="https://www.deezer.com/" data-platform="deezer">
                        <img src="icons/deezer.svg" alt="Deezer">
                        <span>Deezer</span>
                    </button>
                    <button class="platform-btn" data-url="https://soundcloud.com/" data-platform="soundcloud">
                        <img src="icons/soundcloud.svg" alt="SoundCloud">
                        <span>SoundCloud</span>
                    </button>
                    <button class="platform-btn" data-url="https://www.mixcloud.com/" data-platform="mixcloud">
                        <img src="icons/mixcloud.svg" alt="Mixcloud">
                        <span>Mixcloud</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- Ana İçerik Alanı -->
        <main class="main-content">
            <!-- Üst Gezinme Çubuğu -->
            <div class="nav-bar">
                <button class="nav-btn" id="backBtn" title="Geri">
                    <svg viewBox="0 0 24 24" fill="currentColor"><path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/></svg>
                </button>
                <button class="nav-btn" id="forwardBtn" title="İleri">
                    <svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"/></svg>
                </button>
                <button class="nav-btn" id="refreshBtn" title="Yenile">
                    <svg viewBox="0 0 24 24" fill="currentColor"><path d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"/></svg>
                </button>
            </div>

            <!-- Şu An Çalınan Barı -->
            <div class="now-playing-bar">
                <span id="nowPlayingLabel">Şu An Çalınan: Aurivo Player - Hazır</span>
            </div>

            <!-- İçerik Stack -->
            <div class="content-stack">
                <!-- Müzik Sayfası (Playlist) -->
                <div class="page active" id="musicPage">
                    <div class="playlist" id="playlist">
                        <!-- Playlist items will be added dynamically -->
                    </div>
                </div>

                <!-- Video Sayfası -->
                <div class="page hidden" id="videoPage">
                    <video id="videoPlayer" controls></video>
                </div>

                <!-- Web Sayfası -->
                <div class="page hidden" id="webPage">
                    <webview id="webView" src="about:blank" allowpopups></webview>
                </div>
            </div>

            <!-- Player Bar -->
            <div class="player-bar">
                <!-- Zaman Çubuğu -->
                <div class="time-container">
                    <span class="time-label" id="currentTime">00:00</span>
                    <div class="seek-slider-container">
                        <input type="range" class="seek-slider rainbow-slider" id="seekSlider" min="0" max="1000" value="0">
                    </div>
                    <span class="time-label" id="durationTime">--:--</span>
                </div>

                <!-- Kontroller -->
                <div class="controls-row">
                    <div class="controls-center">
                        <button class="control-btn glow-btn" id="shuffleBtn" title="Karıştır">
                            <svg viewBox="0 0 24 24" fill="currentColor"><path d="M10.59 9.17L5.41 4 4 5.41l5.17 5.17 1.42-1.41zM14.5 4l2.04 2.04L4 18.59 5.41 20 17.96 7.46 20 9.5V4h-5.5zm.33 9.41l-1.41 1.41 3.13 3.13L14.5 20H20v-5.5l-2.04 2.04-3.13-3.13z"/></svg>
                        </button>
                        <button class="control-btn" id="prevBtn" title="Önceki">
                            <svg viewBox="0 0 24 24" fill="currentColor"><path d="M6 6h2v12H6zm3.5 6l8.5 6V6z"/></svg>
                        </button>
                        <button class="control-btn" id="rewindBtn" title="10sn Geri">
                            <svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 5V1L7 6l5 5V7c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6H4c0 4.42 3.58 8 8 8s8-3.58 8-8-3.58-8-8-8zm-1.1 11H10v-3.3L9 13v-.7l1.8-.6h.1V16zm4.3-1.8c0 .3 0 .6-.1.8l-.3.6s-.3.3-.5.3-.4.1-.6.1-.4 0-.6-.1-.3-.2-.5-.3-.2-.3-.3-.6-.1-.5-.1-.8v-.7c0-.3 0-.6.1-.8l.3-.6s.3-.3.5-.3.4-.1.6-.1.4 0 .6.1.3.2.5.3.2.3.3.6.1.5.1.8v.7zm-.9-.8v-.5s-.1-.2-.1-.3-.1-.1-.2-.2-.2-.1-.3-.1-.2 0-.3.1l-.2.2s-.1.2-.1.3v2s.1.2.1.3.1.1.2.2.2.1.3.1.2 0 .3-.1l.2-.2s.1-.2.1-.3v-1.5z"/></svg>
                        </button>
                        <button class="control-btn play-btn" id="playPauseBtn" title="Oynat/Duraklat">
                            <svg viewBox="0 0 24 24" fill="currentColor" id="playIcon"><path d="M8 5v14l11-7z"/></svg>
                            <svg viewBox="0 0 24 24" fill="currentColor" id="pauseIcon" class="hidden"><path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/></svg>
                        </button>
                        <button class="control-btn" id="forwardSeekBtn" title="10sn İleri">
                            <svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 5V1l5 5-5 5V7c-3.31 0-6 2.69-6 6s2.69 6 6 6 6-2.69 6-6h2c0 4.42-3.58 8-8 8s-8-3.58-8-8 3.58-8 8-8zm-1.1 11H10v-3.3L9 13v-.7l1.8-.6h.1V16zm4.3-1.8c0 .3 0 .6-.1.8l-.3.6s-.3.3-.5.3-.4.1-.6.1-.4 0-.6-.1-.3-.2-.5-.3-.2-.3-.3-.6-.1-.5-.1-.8v-.7c0-.3 0-.6.1-.8l.3-.6s.3-.3.5-.3.4-.1.6-.1.4 0 .6.1.3.2.5.3.2.3.3.6.1.5.1.8v.7zm-.9-.8v-.5s-.1-.2-.1-.3-.1-.1-.2-.2-.2-.1-.3-.1-.2 0-.3.1l-.2.2s-.1.2-.1.3v2s.1.2.1.3.1.1.2.2.2.1.3.1.2 0 .3-.1l.2-.2s.1-.2.1-.3v-1.5z"/></svg>
                        </button>
                        <button class="control-btn" id="nextBtn" title="Sonraki">
                            <svg viewBox="0 0 24 24" fill="currentColor"><path d="M6 18l8.5-6L6 6v12zM16 6v12h2V6h-2z"/></svg>
                        </button>
                        <button class="control-btn glow-btn" id="repeatBtn" title="Tekrarla">
                            <svg viewBox="0 0 24 24" fill="currentColor"><path d="M7 7h10v3l4-4-4-4v3H5v6h2V7zm10 10H7v-3l-4 4 4 4v-3h12v-6h-2v4z"/></svg>
                        </button>
                    </div>
                    <div class="controls-right">
                        <button class="control-btn eq-btn-player" id="eqBtn" title="Ses Efektleri (EQ)">
                            <svg viewBox="0 0 24 24" fill="currentColor">
                                <path d="M3 17v2h6v-2H3zM3 5v2h10V5H3zm10 16v-2h8v-2h-8v-2h-2v6h2zM7 9v2H3v2h4v2h2V9H7zm14 4v-2H11v2h10zm-6-4h2V7h4V5h-4V3h-2v6z"/>
                            </svg>
                        </button>
                        <button class="control-btn eq-btn-player" id="visualizer-btn" title="Görsel">
                            <svg viewBox="0 0 24 24" fill="currentColor">
                                <path d="M4 19h2V5H4v14zm4 0h2V9H8v10zm4 0h2V3h-2v16zm4 0h2V7h-2v12z"/>
                            </svg>
                            <span class="visually-hidden">Görsel</span>
                        </button>
                        <button class="control-btn" id="volumeBtn" title="Ses">
                            <svg viewBox="0 0 24 24" fill="currentColor" id="volumeIcon"><path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/></svg>
                        </button>
                        <input type="range" class="volume-slider rainbow-slider" id="volumeSlider" min="0" max="100" value="40">
                        <span class="volume-label" id="volumeLabel">40%</span>
                    </div>
                </div>

                <!-- Alt Kısım: Kapak + Visualizer -->
                <div class="player-bottom">
                    <!-- Kapak Resmi -->
                    <div class="cover-section" id="coverSection">
                        <img src="icons/aurivo_256.png" alt="Cover" id="coverArt" onerror="this.src='icons/aurivo_256.png'">
                    </div>
                    <!-- Visualizer -->
                    <div class="visualizer" id="visualizer">
                        <canvas id="visualizerCanvas"></canvas>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Ayarlar Modal -->
    <div class="modal hidden" id="settingsModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Tercihler</h2>
                <button class="modal-close" id="closeSettings">&times;</button>
            </div>
            <div class="modal-body">
                <div class="settings-sidebar">
                    <button class="settings-tab active" data-tab="playback">Oynat</button>
                    <button class="settings-tab" data-tab="behavior">Davranış</button>
                    <button class="settings-tab" data-tab="library">Müzik Kütüphanesi</button>
                    <button class="settings-tab" data-tab="audio">Ses Çıkışı</button>
                </div>
                <div class="settings-content">
                    <div class="settings-page active" id="playbackSettings">
                        <h3>Oynat</h3>
                        <div class="settings-group">
                            <h4>Yumuşak geçiş</h4>
                            <label class="checkbox-label">
                                <input type="checkbox" id="crossfadeStop" checked>
                                <span>Bir parça durdurulurken yumuşak geç</span>
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" id="crossfadeManual" checked>
                                <span>Parça değiştirirken elle çapraz geçiş yap</span>
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" id="crossfadeAuto">
                                <span>Parça değiştirirken otomatik olarak çapraz geçiş yap</span>
                            </label>
                            <label class="checkbox-label indent">
                                <input type="checkbox" id="sameAlbumNoCrossfade" checked disabled>
                                <span>Aynı albümde veya aynı CUE dosyasında bulunan parçalar hariç</span>
                            </label>
                            <div class="setting-row">
                                <span>Yumuşak geçiş süresi</span>
                                <input type="number" id="crossfadeMs" value="2000" min="0" max="15000" step="100"> ms
                            </div>
                            <label class="checkbox-label">
                                <input type="checkbox" id="fadeOnPause">
                                <span>Fade out on pause / fade in on resume</span>
                            </label>
                            <div class="setting-row">
                                <span>Fade süresi</span>
                                <input type="number" id="pauseFadeMs" value="250" min="0" max="5000" step="50"> ms
                            </div>
                            <button class="reset-btn" id="resetPlayback">↻ Varsayılan Ayarlar</button>
                        </div>
                    </div>
                    <div class="settings-page hidden" id="behaviorSettings">
                        <h3>Davranış</h3>
                        <p>Davranış ayarları buraya eklenecek...</p>
                    </div>
                    <div class="settings-page hidden" id="librarySettings">
                        <h3>Müzik Kütüphanesi</h3>
                        <p>Kütüphane ayarları buraya eklenecek...</p>
                    </div>
                    <div class="settings-page hidden" id="audioSettings">
                        <h3>Ses Çıkışı</h3>
                        <p>Ses çıkış ayarları buraya eklenecek...</p>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn" id="settingsOk">✓ Tamam</button>
                <button class="btn" id="settingsApply">✓ Uygula</button>
                <button class="btn" id="settingsCancel">⟲ İptal</button>
            </div>
        </div>
    </div>

    <!-- ============================================
         EQ & SOUND EFFECTS PANEL
         ============================================ -->
    <div class="modal hidden" id="eqModal">
        <div class="modal-content eq-modal-content">
            <div class="modal-header eq-header">
                <h2>
                    <svg viewBox="0 0 24 24" fill="currentColor" width="24" height="24">
                        <path d="M3 17v2h6v-2H3zM3 5v2h10V5H3zm10 16v-2h8v-2h-8v-2h-2v6h2zM7 9v2H3v2h4v2h2V9H7zm14 4v-2H11v2h10zm-6-4h2V7h4V5h-4V3h-2v6z"/>
                    </svg>
                    Ses Efektleri & Equalizer
                </h2>
                <button class="modal-close" id="closeEQ">&times;</button>
            </div>
            
            <div class="eq-modal-body">
                <!-- Üst Kontroller -->
                <div class="eq-top-controls">
                    <!-- Preset Seçimi -->
                    <div class="eq-control-group">
                        <label>Preset</label>
                        <select id="eqPresetSelect" class="eq-select">
                            <option value="flat">Flat (Düz)</option>
                            <option value="rock">Rock</option>
                            <option value="pop">Pop</option>
                            <option value="classical">Klasik</option>
                            <option value="jazz">Jazz</option>
                            <option value="electronic">Elektronik</option>
                            <option value="hiphop">Hip-Hop</option>
                            <option value="bass_boost">Bass Boost</option>
                            <option value="treble_boost">Treble Boost</option>
                            <option value="vocal">Vokal</option>
                            <option value="loudness">Loudness</option>
                            <option value="custom">Özel</option>
                        </select>
                    </div>
                    
                    <!-- Pre-amp -->
                    <div class="eq-control-group preamp-group">
                        <label>Pre-amp</label>
                        <div class="preamp-control">
                            <input type="range" id="preampSlider" class="eq-slider vertical-slider" 
                                   min="-12" max="12" value="0" step="0.5" orient="vertical">
                            <span class="preamp-value" id="preampValue">0 dB</span>
                        </div>
                    </div>
                    
                    <!-- Master Volume -->
                    <div class="eq-control-group volume-group">
                        <label>Master</label>
                        <div class="volume-control">
                            <input type="range" id="masterVolumeSlider" class="eq-slider vertical-slider" 
                                   min="0" max="100" value="100" orient="vertical">
                            <span class="volume-value" id="masterVolumeValue">100%</span>
                        </div>
                    </div>
                    
                    <!-- Clipping Indicator -->
                    <div class="eq-control-group clipping-group">
                        <label>Seviye</label>
                        <div class="clipping-indicator">
                            <div class="level-meter">
                                <div class="level-bar" id="levelBarLeft"></div>
                                <div class="level-bar" id="levelBarRight"></div>
                            </div>
                            <div class="clip-led" id="clipLed" title="Clipping Indicator"></div>
                            <span class="peak-label" id="peakLabel">-∞ dB</span>
                        </div>
                    </div>
                    
                    <!-- Reset & Auto-gain -->
                    <div class="eq-control-group actions-group">
                        <button class="eq-btn" id="resetEQBtn" title="EQ'yu Sıfırla">
                            <svg viewBox="0 0 24 24" fill="currentColor" width="16" height="16">
                                <path d="M12 5V1L7 6l5 5V7c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6H4c0 4.42 3.58 8 8 8s8-3.58 8-8-3.58-8-8-8z"/>
                            </svg>
                            Reset
                        </button>
                        <label class="toggle-label">
                            <input type="checkbox" id="autoGainToggle" checked>
                            <span class="toggle-switch"></span>
                            Auto-Gain
                        </label>
                    </div>
                </div>
                
                <!-- 32-Band EQ Sliders -->
                <div class="eq-bands-container">
                    <div class="eq-bands" id="eqBands">
                        <!-- 32 bant slider JS ile oluşturulacak -->
                    </div>
                    <!-- dB Scale -->
                    <div class="eq-db-scale">
                        <span>+15</span>
                        <span>+10</span>
                        <span>+5</span>
                        <span>0</span>
                        <span>-5</span>
                        <span>-10</span>
                        <span>-15</span>
                    </div>
                </div>
                
                <!-- Alt Kontroller: Bass Boost & Knobs -->
                <div class="eq-bottom-controls">
                    <!-- Bass Boost Knob -->
                    <div class="knob-section">
                        <label>Bass Boost</label>
                        <div class="knob-container" id="bassBoostKnob" data-value="0" data-min="0" data-max="100">
                            <canvas class="knob-canvas" id="bassBoostCanvas" width="80" height="80"></canvas>
                            <span class="knob-value" id="bassBoostValue">0%</span>
                        </div>
                    </div>
                    
                    <!-- Stereo Width Knob -->
                    <div class="knob-section">
                        <label>Stereo Width</label>
                        <div class="knob-container" id="stereoWidthKnob" data-value="100" data-min="0" data-max="200">
                            <canvas class="knob-canvas" width="80" height="80"></canvas>
                            <span class="knob-value">100%</span>
                        </div>
                    </div>
                    
                    <!-- Balance Knob -->
                    <div class="knob-section">
                        <label>Balance</label>
                        <div class="knob-container" id="balanceKnob" data-value="0" data-min="-100" data-max="100">
                            <canvas class="knob-canvas" width="80" height="80"></canvas>
                            <span class="knob-value">C</span>
                        </div>
                    </div>
                    
                    <!-- EQ Enabled Toggle -->
                    <div class="eq-enable-section">
                        <label class="big-toggle-label">
                            <input type="checkbox" id="eqEnabledToggle" checked>
                            <span class="big-toggle-switch"></span>
                        </label>
                        <span class="toggle-text">EQ Aktif</span>
                    </div>
                </div>
            </div>
            
            <div class="modal-footer eq-footer">
                <button class="eq-btn" id="eqManagePresets">
                    <svg viewBox="0 0 24 24" fill="currentColor" width="16" height="16">
                        <path d="M3 17v2h6v-2H3zM3 5v2h10V5H3zm10 16v-2h8v-2h-8v-2h-2v6h2zM7 9v2H3v2h4v2h2V9H7zm14 4v-2H11v2h10zm-6-4h2V7h4V5h-4V3h-2v6z"/>
                    </svg>
                    Presetleri Yönet
                </button>
                <button class="eq-btn primary" id="eqSavePreset">
                    <svg viewBox="0 0 24 24" fill="currentColor" width="16" height="16">
                        <path d="M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"/>
                    </svg>
                    Preset Kaydet
                </button>
                <button class="eq-btn" id="eqClose">Kapat</button>
            </div>
        </div>
    </div>

    <!-- ============================================
         CUSTOM PRESET SAVE MODAL
         ============================================ -->
    <div class="modal hidden" id="savePresetModal">
        <div class="modal-content save-preset-modal">
            <div class="modal-header">
                <h2>
                    <svg viewBox="0 0 24 24" fill="currentColor" width="24" height="24">
                        <path d="M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"/>
                    </svg>
                    Yeni Preset Kaydet
                </h2>
                <button class="modal-close" id="closeSavePreset">&times;</button>
            </div>
            <div class="modal-body save-preset-body">
                <div class="form-group">
                    <label for="presetName">Preset Adı</label>
                    <input type="text" id="presetName" class="form-input" placeholder="Örn: My Bass Mix" maxlength="30">
                </div>
                <div class="form-group">
                    <label for="presetDescription">Açıklama (opsiyonel)</label>
                    <input type="text" id="presetDescription" class="form-input" placeholder="Bu preset hakkında kısa açıklama" maxlength="100">
                </div>
                <div class="preset-preview">
                    <h4>Mevcut Ayarlar</h4>
                    <div class="preview-stats">
                        <div class="stat-item">
                            <span class="stat-label">Bass Boost</span>
                            <span class="stat-value" id="previewBassBoost">0%</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Pre-amp</span>
                            <span class="stat-value" id="previewPreamp">0 dB</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Aktif Bantlar</span>
                            <span class="stat-value" id="previewActiveBands">0/32</span>
                        </div>
                    </div>
                    <div class="mini-eq-preview" id="miniEqPreview"></div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="eq-btn" id="cancelSavePreset">İptal</button>
                <button class="eq-btn primary" id="confirmSavePreset">Kaydet</button>
            </div>
        </div>
    </div>

    <!-- ============================================
         PRESET MANAGER MODAL
         ============================================ -->
    <div class="modal hidden" id="presetManagerModal">
        <div class="modal-content preset-manager-modal">
            <div class="modal-header">
                <h2>
                    <svg viewBox="0 0 24 24" fill="currentColor" width="24" height="24">
                        <path d="M3 17v2h6v-2H3zM3 5v2h10V5H3zm10 16v-2h8v-2h-8v-2h-2v6h2zM7 9v2H3v2h4v2h2V9H7zm14 4v-2H11v2h10zm-6-4h2V7h4V5h-4V3h-2v6z"/>
                    </svg>
                    Preset Yöneticisi
                </h2>
                <button class="modal-close" id="closePresetManager">&times;</button>
            </div>
            <div class="modal-body preset-manager-body">
                <div class="preset-tabs">
                    <button class="preset-tab active" data-tab="factory">Fabrika Presetleri</button>
                    <button class="preset-tab" data-tab="custom">Özel Presetler</button>
                </div>
                
                <div class="preset-list-container">
                    <!-- Factory Presets -->
                    <div class="preset-list" id="factoryPresetList" data-tab="factory">
                        <!-- JS ile doldurulacak -->
                    </div>
                    
                    <!-- Custom Presets -->
                    <div class="preset-list hidden" id="customPresetList" data-tab="custom">
                        <div class="empty-state" id="noCustomPresets">
                            <svg viewBox="0 0 24 24" fill="currentColor" width="48" height="48">
                                <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/>
                            </svg>
                            <p>Henüz özel preset yok</p>
                            <span>"Preset Kaydet" butonunu kullanarak kendi presetlerinizi oluşturun</span>
                        </div>
                    </div>
                </div>
                
                <div class="preset-actions">
                    <button class="eq-btn" id="exportPresets">
                        <svg viewBox="0 0 24 24" fill="currentColor" width="16" height="16">
                            <path d="M19 12v7H5v-7H3v7c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zm-6 .67l2.59-2.58L17 11.5l-5 5-5-5 1.41-1.41L11 12.67V3h2v9.67z"/>
                        </svg>
                        Dışa Aktar
                    </button>
                    <button class="eq-btn" id="importPresets">
                        <svg viewBox="0 0 24 24" fill="currentColor" width="16" height="16">
                            <path d="M19 12v7H5v-7H3v7c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zM12 3L7 8l1.41 1.41L11 6.83V15h2V6.83l2.59 2.58L17 8l-5-5z"/>
                        </svg>
                        İçe Aktar
                    </button>
                    <input type="file" id="importFile" accept=".json" hidden>
                </div>
            </div>
            <div class="modal-footer">
                <button class="eq-btn" id="closePresetManagerBtn">Kapat</button>
            </div>
        </div>
    </div>

    <!-- EQ Button (Player Bar'a eklenecek) -->
    
    <!-- Visualizer Context Menu -->
    <div class="context-menu hidden" id="visualizerContextMenu">
        <!-- Framerate Submenu -->
        <div class="context-menu-item has-submenu" id="framerateMenuItem">
            Kare oranı
            <span class="submenu-arrow">›</span>
            <div class="context-submenu" id="framerateSubmenu">
                <div class="context-menu-item" data-framerate="20">Düşük (20 fps)</div>
                <div class="context-menu-item" data-framerate="25">Orta (25 fps)</div>
                <div class="context-menu-item" data-framerate="30">Yüksek (30 fps)</div>
                <div class="context-menu-item" data-framerate="60">Çok yüksek (60 fps)</div>
            </div>
        </div>
        <div class="context-menu-separator"></div>
        <!-- Analyzer Types -->
        <div class="context-menu-item" data-analyzer="bar">
            <span class="menu-radio"></span> Bar çözümleyici
        </div>
        <div class="context-menu-item" data-analyzer="block">
            <span class="menu-radio"></span> Blok çözümleyici
        </div>
        <div class="context-menu-item" data-analyzer="boom">
            <span class="menu-radio"></span> Boom çözümleyici
        </div>
        <div class="context-menu-item" data-analyzer="sonogram">
            <span class="menu-radio"></span> Sonogram
        </div>
        <div class="context-menu-item" data-analyzer="turbine">
            <span class="menu-radio"></span> Türbin
        </div>
        <div class="context-menu-item" data-analyzer="nyanalyzer">
            <span class="menu-radio"></span> Nyanalyzer Cat
        </div>
        <div class="context-menu-item" data-analyzer="rainbow">
            <span class="menu-radio"></span> Rainbow Dash
        </div>
        <div class="context-menu-item" data-analyzer="none">
            <span class="menu-radio"></span> Çözümleyici yok
        </div>
        <div class="context-menu-separator"></div>
        <!-- Psychedelic Mode -->
        <div class="context-menu-item" id="psychedelicToggle">
            <span class="menu-checkbox"></span> Use Psychedelic Colors
        </div>
        <div class="context-menu-separator"></div>
        <!-- Görseller Submenu -->
        <div class="context-menu-item has-submenu" id="visualsMenuItem">
            Görseller
            <span class="submenu-arrow">›</span>
            <div class="context-submenu" id="visualsSubmenu">
                <div class="context-menu-item" data-visual="glow">
                    <span class="menu-checkbox"></span> Parıltı efekti
                </div>
                <div class="context-menu-item" data-visual="reflection">
                    <span class="menu-checkbox"></span> Yansıma
                </div>
            </div>
        </div>
    </div>

    <script src="renderer.js"></script>
</body>
</html>
